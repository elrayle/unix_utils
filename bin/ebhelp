#! /bin/bash
echo '----------------------------------'
echo 'Set AWS environment'
echo '----------------------------------'
echo '--- set to ld4p int, stg, prod, respectively ---'
echo 'ebuli'
echo 'ebuls'
echo 'ebulp'
echo '--- set to exhibits int, stg, prod, respectively ---'
echo 'ebuxi'
echo 'ebuxs'
echo 'ebuxp'
echo '----------------------------------'
echo 'ssh to AWS machine'
echo '----------------------------------'
echo '# change to one of the environments above'
echo 'eb ssh'
echo '----------------------------------'
echo 'locations on AWS'
echo '----------------------------------'
echo '--- app ---'
echo 'cd /var/app/current'
echo '--- scripts run BEFORE deploy -- e.g. 10_bundle_install.sh ---'
echo 'cd /opt/elasticbeanstalk/hooks/appdeploy/pre'
echo '--- scripts run AFTER puma starts -- e.g. 01_rails_support.sh ---'
echo 'cd /opt/elasticbeanstalk/hooks/appdeploy/post'
echo '--- other scripts ---'
echo 'cd /opt/elasticbeanstalk/support/scripts'
echo '----------------------------------'
echo 'debugging on AWS'
echo '----------------------------------'
echo 'cd /var/app/current'
echo 'bundle exec rails c'
echo 'tail -f -n 50 log/monitor.log'
echo 'tail -f -n 50 log/performance_cache.log'
echo 'tail -f -n 50 log/integration.log'
echo 'tail -f -n 50 log/staging.log'
echo 'tail -f -n 50 log/production.log'
echo 'grep 500 log/production.log'
echo 'grep Timeout log/production.log'
echo 'grep "RDF::Graph#load failure" log/production.log'
echo '----------------------------------'
echo 'working with  environment variables on AWS'
echo '----------------------------------'
echo '--- list ---'
echo 'eb printenv'
echo '--- set -- no space around = sign; value not in quotes---'
echo 'eb setenv _NAME_=_VALUE_'
echo '--- delete -- leave value blank to delete ---'
echo 'eb setenv _NAME_'
echo '----------------------------------'
